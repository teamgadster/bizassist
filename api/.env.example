# BizAssist_api
# Runtime
NODE_ENV=development
PORT=4000
CORS_ORIGIN=*
SHOW_STACK=false

# Database
DATABASE_URL=postgresql://user:pass@localhost:5432/bizassist
DIRECT_URL=postgresql://user:pass@localhost:5432/bizassist

# Auth (JWT)
ACCESS_TOKEN_SECRET=replace-with-32-plus-char-secret
REFRESH_TOKEN_SECRET=replace-with-32-plus-char-secret
ACCESS_TOKEN_EXPIRES_IN=15m
REFRESH_TOKEN_EXPIRES_IN_DAYS=7
BCRYPT_ROUNDS=10

# Auth rate limits (login/register/refresh)
AUTH_LOGIN_ATTEMPTS_PER_WINDOW=10
AUTH_LOGIN_WINDOW_MS=600000
AUTH_REGISTER_ATTEMPTS_PER_WINDOW=20
AUTH_REGISTER_WINDOW_MS=3600000
AUTH_REFRESH_ATTEMPTS_PER_WINDOW=300
AUTH_REFRESH_WINDOW_MS=900000

# Auth rate limits (email verify + resend)
AUTH_VERIFY_EMAIL_ATTEMPTS_PER_WINDOW=10
AUTH_VERIFY_EMAIL_WINDOW_MS=600000
AUTH_RESEND_OTP_ATTEMPTS_PER_WINDOW=3
AUTH_RESEND_OTP_WINDOW_MS=3600000

# Password reset flow limits
AUTH_FORGOT_PASSWORD_ATTEMPTS_PER_WINDOW=5
AUTH_FORGOT_PASSWORD_WINDOW_MS=600000
AUTH_VERIFY_PASSWORD_RESET_ATTEMPTS_PER_WINDOW=10
AUTH_VERIFY_PASSWORD_RESET_WINDOW_MS=600000
AUTH_RESET_PASSWORD_ATTEMPTS_PER_WINDOW=5
AUTH_RESET_PASSWORD_WINDOW_MS=600000
PASSWORD_RESET_TICKET_TTL_MINUTES=15

# Feature flags
SUPABASE_ENABLED=true
OTP_ENABLED=true

# OTP
OTP_HASH_SECRET=replace-with-long-random-secret
OTP_LENGTH=6
OTP_TTL_MINUTES=10
OTP_MAX_ATTEMPTS=5
OTP_RESEND_COOLDOWN_SECONDS=60
OTP_RESEND_HOURLY_CAP=3

# Email (Amazon SES)
AWS_REGION=ap-southeast-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
SES_AWS_REGION=
SES_AWS_ACCESS_KEY_ID=
SES_AWS_SECRET_ACCESS_KEY=
SES_FROM_EMAIL=no-reply@yourdomain.com
SES_CONFIGURATION_SET=
EMAIL_REPLY_TO=support@yourdomain.com

# Optional email template branding (used by emailOtp.mailer.ts)
EMAIL_PRODUCT_NAME=BizAssist AI
EMAIL_SUPPORT=support@bizassist.app
EMAIL_BRAND_COLOR=#2563EB

# Supabase (required when SUPABASE_ENABLED=true)
SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=

# Storage buckets (server-resolved)
SUPABASE_STORAGE_DEFAULT_BUCKET=
SUPABASE_STORAGE_PRODUCT_BUCKET=
SUPABASE_STORAGE_USER_BUCKET=
SUPABASE_STORAGE_BUSINESS_BUCKET=

# Business safety caps
MAX_CATEGORIES_PER_BUSINESS=200
MAX_DISCOUNTS_PER_BUSINESS=300
MAX_CUSTOM_UNITS_PER_BUSINESS=100
